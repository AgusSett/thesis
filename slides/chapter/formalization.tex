
\begin{frame}{Indices de De Bruijn}
	\[ \lambda z. (\lambda y. y (\lambda x. x)) (\lambda x. z x) \]
	
	\pause
	\[ \textcolor{red}{\lambda} (\textcolor{blue}{\lambda\; 0} \; (\textcolor{orange}{\lambda\; 0})) (\textcolor{green}{\lambda}\; \textcolor{red}{1} \; \textcolor{green}{0}) \]
	
	\pause
	\[ (\lambda x. \lambda y. z x (\lambda z. z x)) (\lambda x. w x) \]
	
	\pause
	\[
	(\textcolor{red}{\lambda}\; \lambda\; \textcolor{magenta}{2}\; \textcolor{red}{1}\; (\textcolor{green}{\lambda\; 0}\; \textcolor{red}{2}))\; (\textcolor{blue}{\lambda}\; \textcolor{orange}{2}\; \textcolor{blue}{0})
	\pause
	\hookrightarrow_\beta
	\lambda \; \textcolor{magenta}{1} \; (\textcolor{blue}{\lambda}\; \textcolor{orange}{3}\; \textcolor{blue}{0})\; (\textcolor{green}{\lambda\; 0}\; (\textcolor{blue}{\lambda}\; \textcolor{orange}{4}\; \textcolor{blue}{0}))\;
	\]
\end{frame}

\begin{frame}{Substituciones explícitas}
	\[ (0\; 1\; 3)\{0\mapsto a, 1\mapsto b, 2\mapsto 0, 3\mapsto 1, \dots \} \rightarrow a\; b\; 1 \]
	
	\pause
	\begin{itemize}[<+->]
		\item $id$ (substitución identidad) $\{i \mapsto i\}$.
		\item $\uparrow$ (shift) $\{i \mapsto i+1\}$.
		\item $a \bullet s$ (cons) $\{0 \mapsto a, i+1 \mapsto s(i)\}$. \\ Por ejemplo $a \bullet id = \{ 0 \mapsto a, 1 \mapsto 0, 2 \mapsto 1, 3 \mapsto 2, \dots \} = \{ 0 \mapsto a, i+1 \mapsto i \} $
		\item $s \circ t$ (composición) $t$ $\{ i \mapsto \llangle t \rrangle (s(i)) \}$.
	\end{itemize}
	
	\pause
	\begin{align*}
		\llangle s \rrangle n &= s(n) \\
		\llangle s \rrangle (a\; b) &= \llangle s \rrangle a\; \llangle s \rrangle b \\
		\llangle s \rrangle (\lambda a) &= \lambda \llangle 0 \bullet (s \; \circ \uparrow) \rrangle a
	\end{align*}
\end{frame}

\begin{frame}{Substituciones explícitas}
	\ExecuteMetaData[code/subs.tex]{subs-type}
	\pause
	\ExecuteMetaData[code/subs.tex]{ids}
	\pause
	\ExecuteMetaData[code/subs.tex]{cons}
	\pause
	\ExecuteMetaData[code/subs.tex]{subs}
\end{frame}

\begin{frame}{Substituciones explícitas}
	\ExecuteMetaData[code/subs.tex]{single}

	\pause
	\ExecuteMetaData[code/example.tex]{subst1}
	%\ExecuteMetaData[code/example.tex]{subst2}
\end{frame}

\begin{frame}{Substituciones explícitas}
	\ExecuteMetaData[code/subs.tex]{ren-type}
	\ExecuteMetaData[code/subs.tex]{rename}
	
	\pause
	\ExecuteMetaData[code/example.tex]{rename}
\end{frame}

\begin{frame}{Tipos}
	\begin{columns}
		\begin{column}{0.5\textwidth}
			\input{code/type.tex}
		\end{column}
		\begin{column}{0.5\textwidth}
			\pause
			\ExecuteMetaData[code/example.tex]{types}
		\end{column}
	\end{columns}
\end{frame}

\begin{frame}{Indices intrínsecamente tipados}
	\ExecuteMetaData[code/context.tex]{ctx}
	\pause
	\ExecuteMetaData[code/context.tex]{index}
\end{frame}

\begin{frame}{Ejemplo}
	\ExecuteMetaData[code/context.tex]{example}
\end{frame}

\begin{frame}[allowframebreaks]{Términos}
	\ExecuteMetaData[code/term.tex]{base}
	\pagebreak
	\ExecuteMetaData[code/term.tex]{abs}
	\pagebreak
	\ExecuteMetaData[code/term.tex]{prod}
	
	\pagebreak
	\ExecuteMetaData[code/term.tex]{equiv}
\end{frame}

\begin{frame}{Ejemplo}
	\ExecuteMetaData[code/example.tex]{term}
\end{frame}

\begin{frame}[allowframebreaks]{Reducción}
	\ExecuteMetaData[code/reduction.tex]{app}
	\pagebreak
	\ExecuteMetaData[code/reduction.tex]{app2}
	
	\pagebreak
	\ExecuteMetaData[code/reduction.tex]{pair}
	\pagebreak
	\ExecuteMetaData[code/reduction.tex]{pair2}
	
	\pagebreak
	\ExecuteMetaData[code/reduction.tex]{iso}
\end{frame}

\begin{frame}{Ejemplo}
	\ExecuteMetaData[code/example.tex]{reduction}
\end{frame}

\begin{frame}{Isomorfismos de tipos}
	\input{code/iso_type.tex}
\end{frame}

\begin{frame}{Ejemplo}
	\ExecuteMetaData[code/example.tex]{iso-type}
\end{frame}

\begin{frame}{Equivalencias entre términos}
	\ExecuteMetaData[code/iso_term.tex]{comm}
\end{frame}

\begin{frame}{Equivalencias entre términos}
	\ExecuteMetaData[code/iso_term.tex]{asso}
\end{frame}

\begin{frame}{Equivalencias entre términos}	
	\[ \langle r,s \rangle \rightleftarrows_{\textsc{split}} \pause \textcolor{blue}{\langle} r, \textcolor{red}{\langle} \pi_B(s),\pi_C(s) \textcolor{red}{\rangle} \textcolor{blue}{\rangle} \pause \rightleftarrows_{\textsc{asso}} \textcolor{blue}{\langle} \textcolor{red}{\langle} r, \pi_B(s) \textcolor{red}{\rangle}, \pi_C(s) \textcolor{blue}{\rangle} \]
	\pause
	\ExecuteMetaData[code/iso_term.tex]{asso-split}
	%\ExecuteMetaData[code/iso_term.tex]{dist}
\end{frame}

\begin{frame}{Equivalencias entre términos}	
	\[ \lambda \textcolor{red}{x^A}. \lambda \textcolor{blue}{y^B}. r \rightleftarrows \lambda z^{A \times B}. r[\textcolor{red}{\pi_B(z)/y}, \textcolor{blue}{\pi_A(z)/x}] \]

	\pause
	\[ \lambda r[\textcolor{red}{\pi_B(z)/y}, \textcolor{blue}{\pi_A(z)/x}] \]
	\pause
	\[ \lambda r[\textcolor{red}{\pi_B(0)}, \textcolor{blue}{\pi_A(0)}] \]
	
	\pause
	\ExecuteMetaData[code/iso_term.tex]{subs-curry}
	
	\pause
	\ExecuteMetaData[code/iso_term.tex]{curry}
\end{frame}

\begin{frame}{Equivalencias entre términos}	
	\[ \lambda x^{A \times B}. r \rightleftarrows \lambda y^A. \lambda z^B. r[\langle y, z \rangle/x] \]
	
	\pause
	\[ \lambda \lambda r[\langle y,z \rangle/x] \]
	\pause
	\[ \lambda \lambda r[\langle 1,0 \rangle] \]
	
	\pause
	\ExecuteMetaData[code/iso_term.tex]{subs-uncurry}
	
	\pause
	\ExecuteMetaData[code/iso_term.tex]{uncurry}
	
	%\ExecuteMetaData[code/iso_term.tex]{id-pair}
	%\ExecuteMetaData[code/iso_term.tex]{cong-abs}
	%\ExecuteMetaData[code/iso_term.tex]{cong-pair}
	%\ExecuteMetaData[code/iso_term.tex]{cong-app}
\end{frame}

\begin{frame}{Equivalencias entre términos}	
	\ExecuteMetaData[code/iso_term.tex]{cong-proj}
\end{frame}

\begin{frame}{Ejemplo}
	\ExecuteMetaData[code/example.tex]{iso-term-1}
	\pause
	\ExecuteMetaData[code/example.tex]{iso-term-2}
\end{frame}

\begin{frame}{Evaluación}
	\ExecuteMetaData[code/eval.tex]{relation}
\end{frame}

\begin{frame}{Evaluación}
	\ExecuteMetaData[code/example.tex]{eval1}
	%\ExecuteMetaData[code/eval.tex]{eval}
\end{frame}